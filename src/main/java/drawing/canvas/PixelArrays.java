package drawing.canvas;

/**
 * Утилита для глубокого копирования 2D-массивов.
 *
 * ЗАЧЕМ ОТДЕЛЬНЫЙ КЛАСС?
 *
 * Копирование 2D-массива нужно в двух местах:
 * - Canvas.copyPixels() — для создания Memento
 * - CanvasMemento.restore() — для восстановления
 *
 * Вместо дублирования кода я вынес его в утилиту.
 *
 * ПОЧЕМУ PACKAGE-PRIVATE?
 *
 * Этот класс — деталь реализации пакета canvas.
 * Внешнему коду не нужно знать о нём.
 * Package-private (без модификатора) скрывает его от внешнего мира.
 *
 * ПОЧЕМУ НЕ Arrays.copyOf() ИЛИ clone()?
 *
 * Для двумерного массива они создают SHALLOW копию:
 *
 *   char[][] copy = original.clone();
 *   copy[0][0] = 'X';  // Изменит и original[0][0]!
 *
 * Потому что clone() копирует ссылки на строки, а не сами строки.
 * Нужно явно клонировать каждую строку.
 */
final class PixelArrays {

    /**
     * Приватный конструктор — утилитный класс нельзя инстанцировать.
     */
    private PixelArrays() {
    }

    /**
     * Создаёт глубокую копию 2D-массива.
     *
     * Каждая строка клонируется отдельно, поэтому изменения
     * в копии не влияют на оригинал и наоборот.
     */
    static char[][] copy(char[][] source) {
        var copy = new char[source.length][];
        for (var i = 0; i < source.length; i++) {
            copy[i] = source[i].clone();  // Копируем каждую строку
        }
        return copy;
    }
}
